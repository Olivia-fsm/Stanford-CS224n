(function(_ds){var window=this;'use strict';var wfa=function(){return(0,_ds.R)('<div class="devsite-select"></div>')},xfa=function(a){var b=a.ariaLabel,c=a.Lp;a='<label id="'+_ds.V(a.id)+'-label" style="display:none;"'+(b?' aria-label="'+_ds.V(b)+'"':"")+">";return(0,_ds.R)((c?a+"\u9009\u62e9\u4e00\u4e2a\u6216\u591a\u4e2a\u9009\u9879":a+"\u8bf7\u9009\u62e9\u4e00\u4e2a\u9009\u9879")+"</label>")},yfa=function(a){var b=a.label;a=a.id;return(0,_ds.R)('<button type="button" class="devsite-select-toggle" id="'+_ds.V(a)+'-button" aria-haspopup="true" aria-labelledby="'+
_ds.V(a)+"-label "+_ds.V(a)+'-button" aria-controls="'+_ds.V(a)+'-popup">'+_ds.T(b)+"</button>")},zfa=function(){return(0,_ds.R)('<span class="devsite-icon devsite-icon-arrow-drop-down devsite-select-toggle-icon" aria-hidden="true"></span>')},Afa=function(a){var b=a.options,c=a.id;a=a.Lp;a='<ul class="devsite-select-list" id="'+_ds.V(c)+'-popup" tabindex="-1" role="listbox" scrollbars aria-labelledby="'+_ds.V(c)+'-button"'+(a?' aria-multiselectable="true"':"")+">";for(var d=b.length,e=0;e<d;e++){var g=
b[e];a+='<li role="option"';for(var h=_ds.Xv(g.attributes),k=h.length,l=0;l<k;l++){var n=h[l];a+=" "+_ds.Lu(n)+'="'+_ds.V(g.attributes.get(n))+'"'}a+=' id="'+_ds.V(c)+"-"+_ds.V(e)+'" class="devsite-select-item" data-index="'+_ds.V(e)+'"'+(g.defaultSelected?' data-selected aria-selected="true"':' aria-selected="false"')+' aria-label="'+_ds.V(g.ariaLabel)+'">'+_ds.T(g.label)+"</li>"}return(0,_ds.R)(a+"</ul>")},G7=function(){var a=_ds.W.call(this)||this;a.ra=null;a.Da=null;a.Ba=new _ds.al;a.Ca=new _ds.al;
a.Ga=null;a.Ia=!1;a.xa=!1;a.Ja="";a.ea=null;a.ya=null;a.oa=null;a.Fa=null;a.Wa=new _ds.Zk;return a},Bfa=function(a){var b=a.querySelector(".kd-select");b&&(b.classList.remove("kd-select"),Array.from(b.classList).forEach(function(c){a.classList.add(c);b.classList.remove(c)}))},Efa=function(a){a.oa=a.querySelector("select");var b;(b=a.oa.id)||(H7++,b="devsite-select-"+H7+Math.random().toString().substr(2));a.oa&&(a.oa.options.length&&(a.Fa=a.oa.options),a.oa.hasAttribute("multiple")&&(a.xa=!0,a.classList.add("devsite-select--multiple")));
if(a.Fa){var c=_ds.hv(wfa),d=a.oa.options;d=d[a.oa.selectedIndex]||d[0];a.Ja=a.hasAttribute("label")?a.getAttribute("label"):d.label;d={ariaLabel:a.oa.getAttribute("aria-label"),id:b,Lp:a.xa};d=_ds.hv(xfa,d);c.appendChild(d);a.ya=_ds.hv(yfa,{label:a.Ja,id:b});d=_ds.hv(zfa);c.appendChild(a.ya);c.appendChild(d);a.ea=_ds.hv(Afa,{options:Array.from(a.Fa).map(function(e){for(var g=e.defaultSelected,h=I7(e.label,e.defaultSelected),k=e.label,l=new Map,n=_ds.u(Cfa),q=n.next();!q.done;q=n.next())q=q.value,
e.hasAttribute(q)&&l.set(q,e.getAttribute(q));return{defaultSelected:g,ariaLabel:h,label:k,attributes:l}}),id:b,Lp:a.xa});c.appendChild(a.ea);a.appendChild(c);a.oa.hasAttribute("disabled")&&a.querySelector(".devsite-select-toggle").setAttribute("disabled","");Dfa(a)}a.Ia=!0},Dfa=function(a){a.Ba.listen(a.ya,"click",function(b){clearTimeout(a.Ga);a.dispatchEvent(new CustomEvent("devsite-close-select",{bubbles:!0}));b.preventDefault();b.stopPropagation();a.hasAttribute("menu--open")?J7(a):K7(a)});a.Ba.listen(a.ea,
"click",function(b){b.target.classList.contains("devsite-select-item")&&L7(a,b.target)});a.Ba.listen(a.ea,"focusout",function(){a.Ga=setTimeout(function(){return J7(a)},200)});a.Ba.listen(a.oa,"change",function(){M7(a,N7(a.querySelectorAll("option")))});a.Ba.listen(a.ea,"keydown",function(b){var c=b.which||b.keyCode;switch(c){case 38:case 40:b.preventDefault();if(a.ra){if(b=40===c?_ds.li(a.ra):_ds.mi(a.ra))a.ra.classList.remove("devsite-focused"),a.ea.setAttribute("aria-activedescendant",b.id),b.classList.add("devsite-focused"),
a.ra=b}else O7(a);a.ra.scrollIntoView({block:"nearest"});break;case 13:case 32:b.preventDefault();L7(a,a.ra);break;case 9:case 27:J7(a)}});a.Ba.listen(a.ya,"keydown",function(b){var c=b.which||b.keyCode;if(38===c||40===c)b.preventDefault(),a.hasAttribute("menu--open")||K7(a)})},K7=function(a){a.setAttribute("menu--open","");a.setAttribute("aria-expanded","true");O7(a);a.ea.focus();"scrollIntoViewIfNeeded"in a.ra&&a.ra.scrollIntoViewIfNeeded()},J7=function(a){a.removeAttribute("menu--open");a.removeAttribute("aria-expanded");
a.Ca.listen(document.body,"click",a.Da);a.Ca.listen(document.body,"devsite-close-select",a.Da);a.ra&&a.ra.classList.remove("devsite-focused")},L7=function(a,b){b&&(P7(a,parseInt(b.dataset.index,10)),a.xa||(J7(a),a.ya.focus()),a.oa.dispatchEvent(new Event("change")))},O7=function(a){if(a.ea){var b=Array.from(a.ea.children).find(function(c){return c.hasAttribute("data-selected")});a.ra=b?b:a.ea.children[0];a.ea.setAttribute("aria-activedescendant",a.ra.id)}},Ffa=function(a){a.Da=function(b){if("devsite-close-select"!==
b.type||b.target!==a)a.xa&&"devsite-select-item"===b.target.className||J7(a)};a.ea&&(a.Ca.listen(document.body,"click",a.Da),a.Ca.listen(document.body,"devsite-close-select",a.Da))},Q7=function(a){if(a.ea&&a.ya){a.ea.style.removeProperty("left");a.ea.style.removeProperty("right");var b=a.ea.getBoundingClientRect(),c=_ds.$k(a.Wa).width;0<b.x+b.width-c?a.ea.style.right="0":a.ea.style.left="0"}},N7=function(a){return Array.from(a).reduce(function(b,c,d){c.selected&&b.push(d);return b},[])},P7=function(a,
b){var c=a.querySelectorAll("option");if(c&&c.length){if(!a.xa)for(var d=_ds.u(c),e=d.next();!e.done;e=d.next())e.value.removeAttribute("selected");c[b]&&(b=c[b],a.xa&&b.hasAttribute("selected")?b.removeAttribute("selected"):b.setAttribute("selected","true"));M7(a,N7(c))}},M7=function(a,b){var c=a.querySelectorAll(".devsite-select-item");Array.from(c).forEach(function(d,e){d=!1;b.includes(e)?(d=!0,c[e].setAttribute("data-selected",""),c[e].setAttribute("aria-selected","true"),a.ea.setAttribute("aria-activedescendant",
c[e].id)):(c[e].removeAttribute("data-selected"),c[e].setAttribute("aria-selected","false"));c[e].setAttribute("aria-label",I7(c[e].textContent,d))});a.xa||(a.ya.textContent=a.oa.options[b[0]].label);Q7(a)},I7=function(a,b){return(void 0===b?0:b)?a+"\uff0c\u5df2\u9009\u4e2d":a},H7=0;var Cfa=["lang","value"];_ds.v(G7,_ds.W);
G7.prototype.attributeChangedCallback=function(a,b,c){var d=this;return _ds.C(function(e){if(1==e.ea){if("menu--open"!==a||b===c)return e.Ha(2);if(!d.hasAttribute("menu--open"))return d.removeAttribute("menu--show"),_ds.fl(d.Ca),e.Ha(2);Q7(d);d.removeAttribute("menu-position");if(d.ea){var g=d.ea.getBoundingClientRect(),h=_ds.$k(d.Wa).height,k=parseInt(_ds.nl(d.ea,"maxHeight"),10);d.setAttribute("menu-position",g.top+(d.ea.scrollHeight>k?k:d.ea.scrollHeight)<h?"below":"above")}Ffa(d);return _ds.x(e,
0,4)}2!=e.ea&&d.setAttribute("menu--show","");"reset"===a&&P7(d,0);_ds.y(e)})};G7.prototype.connectedCallback=function(){this.Ia||(Bfa(this),Efa(this))};G7.prototype.disconnectedCallback=function(){_ds.fl(this.Ca);_ds.fl(this.Ba)};_ds.m.Object.defineProperties(G7.prototype,{value:{configurable:!0,enumerable:!0,get:function(){return this.oa.value},set:function(a){L7(this,this.ea.querySelector('.devsite-select-item[value="'+a+'"]'))}}});
_ds.m.Object.defineProperties(G7,{observedAttributes:{configurable:!0,enumerable:!0,get:function(){return["label","menu--open","reset"]}}});G7.prototype.disconnectedCallback=G7.prototype.disconnectedCallback;G7.prototype.connectedCallback=G7.prototype.connectedCallback;G7.prototype.attributeChangedCallback=G7.prototype.attributeChangedCallback;try{window.customElements.define("devsite-select",G7)}catch(a){console.warn("devsite.app.customElement.DevsiteSelect",a)};})(_ds_www);
